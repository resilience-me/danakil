<html>
<head>
    <meta charset="utf-8">
    <script src="https://cdn.jsdelivr.net/npm/eosjs@16.0.6/lib/eos.min.js"
            integrity="sha512-IS9vyI+sMK7MYNJgHj9G8Li21QYs59sRW/Nyzi+dKUh6bF6OfpOnvzSCTiegWftY1ozOmmyacCH2QIJpZgbuKw=="
            crossorigin="anonymous"></script>
    <script>
    
    
      chain = {
          main: 'aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906', // main network
          jungle: '038f4b0fc8ff18a4f0842a8f0564611f6e96e8535901dd45e43ac8691a1c4dca', // jungle testnet
      }
      
      
      eos = Eos({
          httpEndpoint: 'https://eos.greymass.com',
          chainId: chain.main,
      });
      
      async function loadFile(){
          
          let File ="";
          
          let options = {json:true, 
          scope: "danakilblock", 
          code: "danakilblock", 
          table: "files", 
          limit:-1};
          
          let fileParts = await eos.getTableRows(options);
      
      
          for(let row of fileParts.rows){
      
              File+=row.fileraw;
          }
          
          function hex2a(hexx) {
              var hex = hexx.toString();//force conversion
              var str = '';
              for (var i = 0; (i < hex.length && hex.substr(i, 2) !== '00'); i += 2)
                  str += String.fromCharCode(parseInt(hex.substr(i, 2), 16));
              return str;
          }
          
          
          document.getElementById('data').innerHTML = hex2a(File)
          
          //console.log(File) 
      
          //download("danakilblock.txt", File);
      }
      
      // function download(filename, text) {
      //   var element = document.createElement('a');
      //   element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
      //   element.setAttribute('download', filename);
      
      //   element.style.display = 'none';
      //   document.body.appendChild(element);
      
      //   element.click();
      
      //   document.body.removeChild(element);
      // }
      
       
      loadFile()
       
    </script>
 </head>
<body>
<div style="text-align:center; padding-top: 20px; padding-bottom: 32px; font-family: arial">
<b>Proof-of-thesis:</b> <a href="https://www.bloks.io/account/danakilblock">
https://www.bloks.io/account/danakilblock
</a> (<a href="https://github.com/resilience-me/origin/blob/master/README.md">read more</a>)
</div>
 <div id='data' style="width: 700px; margin:0 auto;">loading...</div>
 </body>
</html>
